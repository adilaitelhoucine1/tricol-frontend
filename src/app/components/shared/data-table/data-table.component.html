<div class="table-wrapper">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Chargement...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && data.length === 0" class="empty-state">
    <p>{{ emptyMessage }}</p>
  </div>

  <!-- Table -->
  <div *ngIf="!loading && data.length > 0" class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th *ngFor="let column of columns">{{ column.label }}</th>
          <th *ngIf="actions.length > 0">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of data" (click)="onRowClick(row)" [class.clickable]="rowClick.observed">
          <td *ngFor="let column of columns">
            <ng-container [ngSwitch]="column.type || 'text'">
              <!-- Text (default) -->
              <span *ngSwitchCase="'text'">{{ getCellValue(row, column) }}</span>

              <!-- Number -->
              <span *ngSwitchCase="'number'">{{ getCellValue(row, column) }}</span>

              <!-- Date -->
              <span *ngSwitchCase="'date'">{{ getCellValue(row, column) | date: 'dd/MM/yyyy' }}</span>

              <!-- Badge -->
              <span *ngSwitchCase="'badge'" class="badge" [ngClass]="'badge-' + getCellValue(row, column)">
                {{ getCellValue(row, column) }}
              </span>

              <!-- Default -->
              <span *ngSwitchDefault>{{ getCellValue(row, column) }}</span>
            </ng-container>
          </td>

          <!-- Actions Column -->
          <td *ngIf="actions.length > 0" class="actions-cell">
            <div class="action-buttons">
              <button
                *ngFor="let action of actions"
                [class]="action.class || 'btn-action'"
                (click)="executeAction(action, row, $event)"
                [title]="action.label">
                <span *ngIf="action.icon">{{ action.icon }}</span>
                <span *ngIf="!action.icon">{{ action.label }}</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

